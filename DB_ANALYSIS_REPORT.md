# –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
## OrthoCRM - –°–∏—Å—Ç–µ–º–∞ –æ—Ä—Ç–æ–¥–æ–Ω—Ç–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –ª–µ—á–µ–Ω–∏—è

–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞: 2025-01-29

---

## 1. –û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –º–æ–¥–µ–ª–µ–π:

#### –ü–∞—Ü–∏–µ–Ω—Ç—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **patients** - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ü–∏–µ–Ω—Ç–∞—Ö
- **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- **doctors** - –≤—Ä–∞—á–∏ (—Ç–æ–ª—å–∫–æ –≤ medical_crm_models.py, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

#### –§–∞–π–ª—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- **files** - —Ñ–∞–π–ª—ã –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ (—Ñ–æ—Ç–æ, —Ä–µ–Ω—Ç–≥–µ–Ω, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- **file_versions** - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- **documents** - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏, –º–µ–¥–∫–∞—Ä—Ç—ã)

#### –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏
- **medical_records** - –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏ (cephalometry, ct)
- **medical_record_history** - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ–¥. –∑–∞–ø–∏—Å–µ–π

#### 3D –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- **three_d_models** - 3D –º–æ–¥–µ–ª–∏ –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- **modeling_sessions** - —Å–µ—Å—Å–∏–∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ë–∏–æ–º–µ—Ç—Ä–∏—è
- **biometry_models** - 3D –º–æ–¥–µ–ª–∏ –¥–ª—è –±–∏–æ–º–µ—Ç—Ä–∏–∏
- **biometry_sessions** - —Å–µ—Å—Å–∏–∏ –±–∏–æ–º–µ—Ç—Ä–∏–∏

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (—Ç–æ–ª—å–∫–æ –≤ medical_crm_models.py, –ù–ï –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø)
- **visits** - –≤–∏–∑–∏—Ç—ã –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
- **diagnoses** - –¥–∏–∞–≥–Ω–æ–∑—ã
- **treatment_plans** - –ø–ª–∞–Ω—ã –ª–µ—á–µ–Ω–∏—è
- **treatment_procedures** - –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –ª–µ—á–µ–Ω–∏—è
- **measurements** - –∏–∑–º–µ—Ä–µ–Ω–∏—è
- **test_results** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–æ–≤
- **analysis_modules** - –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏
- **analysis_module_history** - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–¥—É–ª–µ–π
- **disease_history** - –∏—Å—Ç–æ—Ä–∏—è –±–æ–ª–µ–∑–Ω–µ–π
- **prescriptions** - —Ä–µ—Ü–µ–ø—Ç—ã

---

## 2. –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 2.1 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ Patient (–ö–†–ò–¢–ò–ß–ù–û)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å—Ç—å –¥–≤–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ Patient —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º `__tablename__ = "patients"`

**–õ–æ–∫–∞—Ü–∏—è 1:** `/backend/app/models/patient.py` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```python
class Patient(Base):
    __tablename__ = "patients"
    id: int = Column(Integer, primary_key=True, index=True)
    full_name: str = Column(String, nullable=False)
    birth_date: Date = Column(Date, nullable=False)
    gender: Gender = Column(Enum(Gender, name="gender"), nullable=False)
    contact_info: str = Column(String, nullable=True)
    created_at = Column(DateTime, server_default=func.now(), nullable=False)
    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now(), nullable=False)
```

**–õ–æ–∫–∞—Ü–∏—è 2:** `/backend/app/models/medical_crm_models.py` (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```python
class Patient(Base):
    __tablename__ = "patients"
    id = Column(Integer, primary_key=True, index=True)
    full_name = Column(String, nullable=False)
    birth_date = Column(Date, nullable=False)
    gender = Column(String, nullable=False)
    contact_info = Column(Text, nullable=True)
    medical_card_number = Column(String, unique=True, index=True, nullable=True)
    address = Column(Text, nullable=True)
    emergency_contact = Column(Text, nullable=True)
    insurance_info = Column(Text, nullable=True)
```

**–í–ª–∏—è–Ω–∏–µ:** SQLAlchemy –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑ patient.py, –Ω–æ —ç—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –º–æ–¥–µ–ª—å –≤ patient.py, –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è (medical_card_number, address, emergency_contact, insurance_info) –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

### 2.2 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π 3D –∏ –±–∏–æ–º–µ—Ç—Ä–∏—è (–ö–†–ò–¢–ò–ß–ù–û)

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢—Ä–æ–π–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

**ThreeDModel:**
1. `/backend/app/models/base_3d_model.py` - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `BaseModel3D`
2. `/backend/app/models/modeling.py` - –Ω–∞—Å–ª–µ–¥—É–µ–º—ã–π –∫–ª–∞—Å—Å `ThreeDModel(BaseModel3D)`
3. `/backend/app/models/medical_crm_models.py` - –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–ª–∞—Å—Å `ThreeDModel(Base)` (—Å—Ç—Ä–æ–∫–∏ 418-448)

**BiometryModel:**
1. `/backend/app/models/base_3d_model.py` - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `BaseModel3D`
2. `/backend/app/models/biometry.py` - –Ω–∞—Å–ª–µ–¥—É–µ–º—ã–π –∫–ª–∞—Å—Å `BiometryModel(BaseModel3D)`
3. `/backend/app/models/medical_crm_models.py` - –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–ª–∞—Å—Å `BiometryModel(Base)` (—Å—Ç—Ä–æ–∫–∏ 451-485)

**–í–ª–∏—è–Ω–∏–µ:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω –∏ –ø—É—Ç–∞–Ω–∏—Ü–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∏–∑ medical_crm_models.py, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –º–æ–¥–µ–ª–∏ –∏–∑ modeling.py –∏ biometry.py.

---

### 2.3 –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏ - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (–°–†–ï–î–ù–Ø–Ø)

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ö—Ä–∞–Ω–µ–Ω–∏—é –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–ü–æ–¥—Ö–æ–¥ 1:** `MedicalRecord` –≤ `/backend/app/models/medical_record.py`
```python
class MedicalRecordType(PyEnum):
    CEPHALOMETRY = "cephalometry"
    CT = "ct"

class MedicalRecord(Base):
    __tablename__ = "medical_records"
    patient_id: int = Column(Integer, ForeignKey("patients.id"), nullable=False)
    record_type: MedicalRecordType = Column(Enum(MedicalRecordType, name="medical_record_type"), nullable=False)
    data: str = Column(Text, nullable=True)  # JSON –¥–∞–Ω–Ω—ã–µ
    notes: str = Column(Text, nullable=True)
```

**–ü–æ–¥—Ö–æ–¥ 2:** `AnalysisModule` –≤ `/backend/app/models/medical_crm_models.py` (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```python
class AnalysisModule(Base):
    __tablename__ = "analysis_modules"
    patient_id: int = Column(Integer, ForeignKey("patients.id"), nullable=False)
    module_type = Column(String, nullable=False)  # cephalometry, ct, biometry, photometry, modeling, other
    module_data = Column(JSON, nullable=False)  # JSON –¥–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª—è
    status = Column(String, default="pending")
```

**–í–ª–∏—è–Ω–∏–µ:** `AnalysisModule` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `MedicalRecord`, —Ä–∞—Å—à–∏—Ä–∏—Ç—å `MedicalRecordType` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π.

---

### 2.4 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –¥–ª—è –º–æ–¥—É–ª–µ–π (–°–†–ï–î–ù–Ø–Ø)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–æ–≤

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- –§–æ—Ç–æ–º–µ—Ç—Ä–∏—è (photometry): –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `files` (—Ñ–æ—Ç–æ) + `MedicalRecord` (JSON)
- –¶–µ—Ñ–∞–ª–æ–º–µ—Ç—Ä–∏—è (cephalometry): –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `files` (—Ä–µ–Ω—Ç–≥–µ–Ω—ã) + `MedicalRecord` (JSON)
- –ö–¢ (ct): –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `files` (DICOM) + `MedicalRecord` (JSON)
- 3D –º–æ–¥–µ–ª–∏ (modeling): `three_d_models` + `modeling_sessions`
- –ë–∏–æ–º–µ—Ç—Ä–∏—è (biometry): `biometry_models` + `biometry_sessions`

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–µ—Ç (–∏–∑ PatientCardRefactored.js):**
```javascript
const MODULE_TABS = [
  { id: 'overview', label: '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞', icon: 'üìã' },
  { id: 'photometry', label: '–§–æ—Ç–æ–º–µ—Ç—Ä–∏—è', icon: 'üì∑' },
  { id: 'cephalometry', label: '–¶–µ—Ñ–∞–ª–æ–º–µ—Ç—Ä–∏—è', icon: 'ü¶¥' },
  { id: 'biometry', label: '–ë–∏–æ–º–µ—Ç—Ä–∏—è', icon: 'üìê' },
  { id: 'modeling', label: '3D –ú–æ–¥–µ–ª–∏', icon: 'üñ•Ô∏è' },
  { id: 'ct', label: '–ö–¢', icon: 'ü©ª' },
  { id: 'history', label: '–ò—Å—Ç–æ—Ä–∏—è', icon: 'üìù' }
];
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è:
- `photometry_analyses` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ñ–æ—Ç–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- `cephalometry_analyses` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ü–µ—Ñ–∞–ª–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- `ct_analyses` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ö–¢ –∞–Ω–∞–ª–∏–∑–∞

–ò–õ–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å `MedicalRecord` + —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON.

---

### 2.5 –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–µ–π Patient (–ú–ò–ù–û–†–ù–ê–Ø)

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –º–æ–¥–µ–ª–∏ Patient

**–ë—ç–∫–µ–Ω–¥ –º–æ–¥–µ–ª—å (patient.py):**
```python
class Patient(Base):
    __tablename__ = "patients"
    id: int = Column(Integer, primary_key=True, index=True)
    full_name: str = Column(String, nullable=False)
    birth_date: Date = Column(Date, nullable=False)
    gender: Gender = Column(Enum(Gender, name="gender"), nullable=False)
    contact_info: str = Column(String, nullable=True)
    created_at = Column(DateTime, server_default=func.now(), nullable=False)
    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now(), nullable=False)
```

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ (PatientCardRefactored.js, —Å—Ç—Ä–æ–∫–∞ 586):**
```javascript
<p className="text-gray-700">{patient?.complaints || '–ù–µ—Ä–æ–≤–Ω—ã–µ –∑—É–±—ã, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–∏–∫—É—Å, —ç—Å—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π –¥–µ—Ñ–µ–∫—Ç'}</p>
```

**–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ:** `complaints` - –∂–∞–ª–æ–±—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `complaints` –≤ –º–æ–¥–µ–ª—å Patient:
```python
complaints: str = Column(Text, nullable=True)  # –ñ–∞–ª–æ–±—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞
```

---

### 2.6 –õ–∏—à–Ω–∏–µ –ø–æ–ª—è –≤ File (–ú–ò–ù–û–†–ù–ê–Ø)

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –º–æ–¥–µ–ª–∏ File –µ—Å—Ç—å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã

**File –º–æ–¥–µ–ª—å:**
```python
medical_category: str = Column(String(50), nullable=True)  # clinical, diagnostic, treatment, surgical
study_date: Date = Column(Date, nullable=True)  # –î–∞—Ç–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è/—Å—ä–µ–º–∫–∏
body_part: str = Column(String(100), nullable=True)  # –û–±–ª–∞—Å—Ç—å —Ç–µ–ª–∞ (–∑—É–±—ã, —á–µ–ª—é—Å—Ç—å, –∏ —Ç.–¥.)
image_orientation: str = Column(String(50), nullable=True)  # orientation –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

**–ê–Ω–∞–ª–∏–∑:** –≠—Ç–∏ –ø–æ–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –Ω–æ File –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª—è, –æ–Ω–∏ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

---

### 2.7 –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–ö–†–ò–¢–ò–ß–ù–û –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –∫–æ–¥–∞)

**–ü—Ä–æ–±–ª–µ–º–∞:** `medical_crm_models.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ —Ç–∞–±–ª–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

**–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `doctors` - –≤—Ä–∞—á–∏
- `visits` - –≤–∏–∑–∏—Ç—ã –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
- `diagnoses` - –¥–∏–∞–≥–Ω–æ–∑—ã
- `treatment_plans` - –ø–ª–∞–Ω—ã –ª–µ—á–µ–Ω–∏—è
- `treatment_procedures` - –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –ª–µ—á–µ–Ω–∏—è
- `measurements` - –∏–∑–º–µ—Ä–µ–Ω–∏—è
- `test_results` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–æ–≤
- `analysis_modules` - –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏
- `analysis_module_history` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–¥—É–ª–µ–π
- `disease_history` - –∏—Å—Ç–æ—Ä–∏—è –±–æ–ª–µ–∑–Ω–µ–π
- `prescriptions` - —Ä–µ—Ü–µ–ø—Ç—ã
- `Doctor` - –¥—É–±–ª–∏—Ä—É–µ—Ç User
- `Patient` - –¥—É–±–ª–∏—Ä—É–µ—Ç Patient –∏–∑ patient.py
- `ThreeDModel` - –¥—É–±–ª–∏—Ä—É–µ—Ç ThreeDModel –∏–∑ modeling.py
- `BiometryModel` - –¥—É–±–ª–∏—Ä—É–µ—Ç BiometryModel –∏–∑ biometry.py
- `BiometrySession` - –¥—É–±–ª–∏—Ä—É–µ—Ç BiometrySession –∏–∑ biometry.py

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª `medical_crm_models.py` –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –µ–≥–æ –≤ `legacy_models.py` –∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, —á—Ç–æ —ç—Ç–æ —Å—Ç–∞—Ä—ã–π –∫–æ–¥.

---

## 3. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –∏ –±—ç–∫–µ–Ω–¥—É

### 3.1 –ú–æ–¥—É–ª—å –§–æ—Ç–æ–º–µ—Ç—Ä–∏—è (Photometry)

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–µ—Ç:**
- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏: frontal (–∞–Ω—Ñ–∞—Å), profile (–ø—Ä–æ—Ñ–∏–ª—å), profile45 (–ø—Ä–æ—Ñ–∏–ª—å 45¬∞), intraoral (–∏–Ω—Ç—Ä–∞–æ—Ä–∞–ª—å–Ω—ã–µ)
- –ò–∑–º–µ—Ä–µ–Ω–∏—è: –ø–æ–∑–∏—Ü–∏–∏ –≥—É–±, –ø–æ–¥–±–æ—Ä–æ–¥–∫–∞, –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ –ª–∏—Ü–∞
- –ê–Ω–∞–ª–∏–∑: –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ, —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ

**–ë—ç–∫–µ–Ω–¥:**
- –•—Ä–∞–Ω–∏—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `files` —Å `file_type = MedicalFileType.PHOTO`
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `MedicalRecord` —Å `record_type = "cephalometry"` (??)
- –ù–ï–¢ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ñ–æ—Ç–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∞–ª–∏–∑–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç —Ç–∞–±–ª–∏—Ü—ã `photometry_analyses` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –§–æ—Ç–æ–º–µ—Ç—Ä–∏—è –∏ —Ü–µ—Ñ–∞–ª–æ–º–µ—Ç—Ä–∏—è —Å–º–µ—à–∞–Ω—ã –≤ —Ç–∏–ø–∞—Ö –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `photometry_analyses`
2. –î–æ–±–∞–≤–∏—Ç—å `PHOTOMETRY` –≤ `MedicalRecordType`
3. –•—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ñ–æ—Ç–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ

---

### 3.2 –ú–æ–¥—É–ª—å –¶–µ—Ñ–∞–ª–æ–º–µ—Ç—Ä–∏—è (Cephalometry)

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–µ—Ç:**
- –†–µ–Ω—Ç–≥–µ–Ω–æ–≤—Å–∫–∏–µ —Å–Ω–∏–º–∫–∏: lateral (–±–æ–∫–æ–≤–∞—è), frontal (–ø—Ä—è–º–∞—è)
- –¢–æ—á–∫–∏ —Ü–µ—Ñ–∞–ª–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- –ò–∑–º–µ—Ä–µ–Ω–∏—è: SNA, SNB, ANB –∏ –¥—Ä.
- –£–≥–ª—ã –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è

**–ë—ç–∫–µ–Ω–¥:**
- –•—Ä–∞–Ω–∏—Ç —Å–Ω–∏–º–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `files` —Å `file_type = MedicalFileType.XRAY`
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `MedicalRecord` —Å `record_type = "cephalometry"`
- –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ç–æ—á–µ–∫ –∏ –∏–∑–º–µ—Ä–µ–Ω–∏–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `cephalometry_analyses`
2. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `cephalometry_points` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ—á–µ–∫
3. –•—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –≤–º–µ—Å—Ç–æ JSON

---

### 3.3 –ú–æ–¥—É–ª—å –ö–¢ (CT Scan)

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–µ—Ç:**
- DICOM —Ñ–∞–π–ª—ã (ZIP –∞—Ä—Ö–∏–≤—ã)
- –ò–∑–º–µ—Ä–µ–Ω–∏—è: –í–ù–ß–°, —Å—Ä–µ–∑—ã –∑—É–±–æ–≤, Pen-–∞–Ω–∞–ª–∏–∑, –±–∞–∑–∞–ª—å–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è, –≤–æ–∑–¥—É—Ö–æ–Ω–æ—Å–Ω—ã–µ –ø—É—Ç–∏
- –ü–ª–æ—Å–∫–æ—Å—Ç–∏: sagittal, coronal, axial

**–ë—ç–∫–µ–Ω–¥:**
- –•—Ä–∞–Ω–∏—Ç —Ñ–∞–π–ª—ã –≤ —Ç–∞–±–ª–∏—Ü–µ `files` —Å `file_type = MedicalFileType.CT_SCAN` –∏–ª–∏ `DICOM`
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `MedicalRecord` —Å `record_type = "ct"`
- –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ö–¢ –∞–Ω–∞–ª–∏–∑–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `ct_analyses`
2. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π (tmj_measurements, tooth_measurements –∏ —Ç.–¥.)
3. –•—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö

---

### 3.4 –ú–æ–¥—É–ª—å 3D –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (Modeling)

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–µ—Ç:**
- 3D –º–æ–¥–µ–ª–∏: upper_jaw, lower_jaw, bite_1, bite_2, occlusion_pad
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è: cement_gap, insertion_path, border_thickness, smoothing_strength
- –°–µ—Å—Å–∏–∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–ë—ç–∫–µ–Ω–¥:**
- `three_d_models` - —Ö—Ä–∞–Ω–∏—Ç 3D –º–æ–¥–µ–ª–∏ ‚úì
- `modeling_sessions` - —Ö—Ä–∞–Ω–∏—Ç —Å–µ—Å—Å–∏–∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è ‚úì
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `modeling_sessions` ‚úì
- –°–≤—è–∑—å –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ –∏ –º–æ–¥–µ–ª—è–º–∏ ‚úì

**–°—Ç–∞—Ç—É—Å:** ‚úì –ü–û–õ–ù–û–°–¢–¨–Æ –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢

---

### 3.5 –ú–æ–¥—É–ª—å –ë–∏–æ–º–µ—Ç—Ä–∏—è (Biometry)

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–µ—Ç:**
- 3D –º–æ–¥–µ–ª–∏ –¥–ª—è –±–∏–æ–º–µ—Ç—Ä–∏–∏
- –¢–æ—á–∫–∏ –±–∏–æ–º–µ—Ç—Ä–∏–∏ (model_points, map_points)
- –ü–∞—Ä—ã —Ç–æ—á–µ–∫ (pairs)
- –°–µ—Å—Å–∏–∏ –±–∏–æ–º–µ—Ç—Ä–∏–∏
- –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∏ –º–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

**–ë—ç–∫–µ–Ω–¥:**
- `biometry_models` - —Ö—Ä–∞–Ω–∏—Ç 3D –º–æ–¥–µ–ª–∏ ‚úì
- `biometry_sessions` - —Ö—Ä–∞–Ω–∏—Ç —Å–µ—Å—Å–∏–∏ ‚úì
- `calibration_points` - —Ç–æ—á–∫–∏ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –≤ JSON ‚úì
- `transformation_matrix` - –º–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ JSON ‚úì
- API endpoints –¥–ª—è model_points, map_points, pairs ‚úì

**–°—Ç–∞—Ç—É—Å:** ‚úì –ü–û–õ–ù–û–°–¢–¨–Æ –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢

---

### 3.6 –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞ (Medical Card)

**–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–∂–∏–¥–∞–µ—Ç:**
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: –§–ò–û, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –ø–æ–ª, –∫–æ–Ω—Ç–∞–∫—Ç
- –ê–Ω–∞–º–Ω–µ–∑
- –§–æ—Ç–æ–∞–Ω–∞–ª–∏–∑: –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ, —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ
- –ò–Ω—Ç—Ä–∞–æ—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑: –æ–∫–∫–ª—é–∑–∏—è, –∑—É–±–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞
- –ê–Ω—Ç—Ä–æ–ø–æ–º–µ—Ç—Ä–∏—è: —Ä–∞–∑–º–µ—Ä—ã —á–µ–ª—é—Å—Ç–µ–π, –∏–Ω–¥–µ–∫—Å—ã
- –¶–µ—Ñ–∞–ª–æ–º–µ—Ç—Ä–∏—è: –¢–†–ì –∞–Ω–∞–ª–∏–∑
- 3D –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –º–æ–¥–µ–ª–∏ –∏ —Å–∏–º—É–ª—è—Ü–∏–∏
- –ö–¢ –∞–Ω–∞–ª–∏–∑: findings –∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- –î–∏–∞–≥–Ω–æ–∑—ã
- –ü–ª–∞–Ω –ª–µ—á–µ–Ω–∏—è
- –ó–∞–∫–ª—é—á–µ–Ω–∏—è

**–ë—ç–∫–µ–Ω–¥:**
- `Patient` - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚úì
- `MedicalRecord` - –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏ —Å JSON ‚úì
- `files` - —Ñ–∞–π–ª—ã –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ ‚úì
- –ù–ï–¢ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –¥–ª—è –∞–Ω–∞–º–Ω–µ–∑–∞, –¥–∏–∞–≥–Ω–æ–∑–æ–≤, –ø–ª–∞–Ω–∞ –ª–µ—á–µ–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `complaints` –≤ `Patient`
2. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã:
   - `anamnesis` - –∞–Ω–∞–º–Ω–µ–∑ –ø–∞—Ü–∏–µ–Ω—Ç–∞
   - `diagnoses` - –¥–∏–∞–≥–Ω–æ–∑—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞
   - `treatment_plans` - –ø–ª–∞–Ω—ã –ª–µ—á–µ–Ω–∏—è
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `MedicalRecord` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–æ–≤

---

## 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 4.1 –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)

1. **–£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∏–∑ `medical_crm_models.py`:**
   - Patient (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ patient.py)
   - ThreeDModel (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ modeling.py)
   - BiometryModel (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ biometry.py)
   - BiometrySession (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ biometry.py)

2. **–û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –º–æ–¥–µ–ª–∏:**
   - Patient –∏–∑ `patient.py`
   - User –∏–∑ `user.py`
   - File, FileVersion –∏–∑ `file.py`
   - Document –∏–∑ `document.py`
   - MedicalRecord, MedicalRecordHistory –∏–∑ `medical_record.py`
   - ThreeDModel, ModelingSession –∏–∑ `modeling.py`
   - BiometryModel, BiometrySession –∏–∑ `biometry.py`

### 4.2 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –º–æ–¥–µ–ª–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)

1. **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è –≤ Patient:**
   ```python
   complaints: str = Column(Text, nullable=True)  # –ñ–∞–ª–æ–±—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞
   medical_card_number: str = Column(String(50), unique=True, index=True, nullable=True)
   address: str = Column(Text, nullable=True)
   emergency_contact: str = Column(Text, nullable=True)
   insurance_info: str = Column(Text, nullable=True)
   ```

2. **–†–∞—Å—à–∏—Ä–∏—Ç—å MedicalRecordType:**
   ```python
   class MedicalRecordType(PyEnum):
       CEPHALOMETRY = "cephalometry"
       CT = "ct"
       PHOTOMETRY = "photometry"  # –î–æ–±–∞–≤–∏—Ç—å
       BIOMETRY = "biometry"      # –î–æ–±–∞–≤–∏—Ç—å
       MODELING = "modeling"      # –î–æ–±–∞–≤–∏—Ç—å
   ```

### 4.3 –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)

–í–∞—Ä–∏–∞–Ω—Ç –ê - JSON-–ø–æ–¥—Ö–æ–¥ (–ø—Ä–æ—â–µ, –±—ã—Å—Ç—Ä–µ–µ):
```python
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É MedicalRecord
# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ —Ç–∏–ø—ã –º–æ–¥—É–ª–µ–π –≤ MedicalRecordType
# –•—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –≤ JSON –≤ –ø–æ–ª–µ data
```

–í–∞—Ä–∏–∞–Ω—Ç –ë - –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–ª—É—á—à–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤):
```python
# –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
class PhotometryAnalysis(Base):
    __tablename__ = "photometry_analyses"
    id = Column(Integer, primary_key=True, index=True)
    patient_id = Column(Integer, ForeignKey("patients.id"), nullable=False)
    analysis_date = Column(DateTime, nullable=False)
    frontal_photo_id = Column(Integer, ForeignKey("files.id"), nullable=True)
    profile_photo_id = Column(Integer, ForeignKey("files.id"), nullable=True)
    profile45_photo_id = Column(Integer, ForeignKey("files.id"), nullable=True)
    intraoral_photo_id = Column(Integer, ForeignKey("files.id"), nullable=True)
    upper_lip_position = Column(String(50), nullable=True)  # normal, protruding, retracted
    lower_lip_position = Column(String(50), nullable=True)
    chin_position = Column(String(50), nullable=True)
    measurements = Column(JSON, nullable=True)  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è
    created_at = Column(DateTime, server_default=func.now())

class CephalometryAnalysis(Base):
    __tablename__ = "cephalometry_analyses"
    id = Column(Integer, primary_key=True, index=True)
    patient_id = Column(Integer, ForeignKey("patients.id"), nullable=False)
    analysis_date = Column(DateTime, nullable=False)
    lateral_xray_id = Column(Integer, ForeignKey("files.id"), nullable=True)
    frontal_xray_id = Column(Integer, ForeignKey("files.id"), nullable=True)
    points = Column(JSON, nullable=True)  # –¶–µ—Ñ–∞–ª–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏
    measurements = Column(JSON, nullable=True)  # SNA, SNB, ANB –∏ –¥—Ä.
    angles = Column(JSON, nullable=True)
    distances = Column(JSON, nullable=True)
    created_at = Column(DateTime, server_default=func.now())

class CTAnalysis(Base):
    __tablename__ = "ct_analyses"
    id = Column(Integer, primary_key=True, index=True)
    patient_id = Column(Integer, ForeignKey("patients.id"), nullable=False)
    scan_date = Column(Date, nullable=False)
    archive_id = Column(Integer, ForeignKey("files.id"), nullable=True)
    tmj_measurements = Column(JSON, nullable=True)
    tooth_measurements = Column(JSON, nullable=True)
    pen_analysis = Column(JSON, nullable=True)
    basal_width = Column(JSON, nullable=True)
    airway_measurements = Column(JSON, nullable=True)
    created_at = Column(DateTime, server_default=func.now())
```

### 4.4 –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –∫–∞—Ä—Ç—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)

```python
class Anamnesis(Base):
    __tablename__ = "anamnesis"
    id = Column(Integer, primary_key=True, index=True)
    patient_id = Column(Integer, ForeignKey("patients.id"), nullable=False)
    chief_complaint = Column(Text, nullable=True)  # –û—Å–Ω–æ–≤–Ω–∞—è –∂–∞–ª–æ–±–∞
    medical_history = Column(Text, nullable=True)  # –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è
    family_history = Column(Text, nullable=True)  # –°–µ–º–µ–π–Ω—ã–π –∞–Ω–∞–º–Ω–µ–∑
    allergies = Column(Text, nullable=True)  # –ê–ª–ª–µ—Ä–≥–∏–∏
    medications = Column(Text, nullable=True)  # –¢–µ–∫—É—â–∏–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞
    surgical_history = Column(Text, nullable=True)  # –•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∏–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
    created_at = Column(DateTime, server_default=func.now())
    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now())

class Diagnosis(Base):
    __tablename__ = "diagnoses"
    id = Column(Integer, primary_key=True, index=True)
    patient_id = Column(Integer, ForeignKey("patients.id"), nullable=False)
    diagnosis_code = Column(String(20), nullable=True)  # –ú–ö–ë-10
    diagnosis_text = Column(Text, nullable=False)
    diagnosis_type = Column(String(50), nullable=True)  # preliminary, final, differential
    severity = Column(String(20), nullable=True)  # mild, moderate, severe
    is_chronic = Column(Boolean, default=False)
    is_active = Column(Boolean, default=True)
    diagnosed_date = Column(Date, nullable=False)
    resolved_date = Column(Date, nullable=True)
    notes = Column(Text, nullable=True)
    created_at = Column(DateTime, server_default=func.now())
    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now())

class TreatmentPlan(Base):
    __tablename__ = "treatment_plans"
    id = Column(Integer, primary_key=True, index=True)
    patient_id = Column(Integer, ForeignKey("patients.id"), nullable=False)
    diagnosis_id = Column(Integer, ForeignKey("diagnoses.id"), nullable=True)
    plan_name = Column(String(200), nullable=False)
    description = Column(Text, nullable=True)
    start_date = Column(Date, nullable=False)
    expected_end_date = Column(Date, nullable=True)
    actual_end_date = Column(Date, nullable=True)
    status = Column(String(50), default="active")  # active, completed, cancelled, suspended
    phases = Column(JSON, nullable=True)  # –§–∞–∑—ã –ª–µ—á–µ–Ω–∏—è
    objectives = Column(JSON, nullable=True)  # –¶–µ–ª–∏ –ª–µ—á–µ–Ω–∏—è
    appliances = Column(JSON, nullable=True)  # –ê–ø–ø–∞—Ä–∞—Ç—ã
    notes = Column(Text, nullable=True)
    created_at = Column(DateTime, server_default=func.now())
    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now())
```

---

## 5. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ù–ï–î–ï–õ–Ø 1)

1. **–£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –º–æ–¥–µ–ª–µ–π:**
   - –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã Patient, ThreeDModel, BiometryModel, BiometrySession –∏–∑ `medical_crm_models.py`
   - –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `medical_crm_models.py`

2. **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–µ –ø–æ–ª–µ –≤ Patient:**
   - –î–æ–±–∞–≤–∏—Ç—å `complaints` –ø–æ–ª–µ –≤ –º–æ–¥–µ–ª—å Patient
   - –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è –≤ –ë–î

3. **–†–∞—Å—à–∏—Ä–∏—Ç—å MedicalRecordType:**
   - –î–æ–±–∞–≤–∏—Ç—å PHOTOMETRY, BIOMETRY, MODELING –≤ MedicalRecordType

### –≠—Ç–∞–ø 2: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü (–ù–ï–î–ï–õ–Ø 2)

4. **–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–æ–≤:**
   - –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è PhotometryAnalysis
   - –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è CephalometryAnalysis
   - –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è CTAnalysis
   - –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

5. **–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –∫–∞—Ä—Ç—ã:**
   - –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å Anamnesis
   - –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å Diagnosis
   - –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å TreatmentPlan
   - –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

### –≠—Ç–∞–ø 3: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–ù–ï–î–ï–õ–Ø 3)

6. **–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
   - –ü–∞—Ä—Å–∏—Ç—å JSON –¥–∞–Ω–Ω—ã–µ –∏–∑ MedicalRecord
   - –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –Ω–æ–≤—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
   - –û–±–Ω–æ–≤–∏—Ç—å API endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏

### –≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–ù–ï–î–ï–õ–Ø 4)

7. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:**
   - –û–±–Ω–æ–≤–∏—Ç—å API —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏
   - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

---

## 6. –†–µ–∑—é–º–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. ‚ùå **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞, —Å–æ–∑–¥–∞—é—â–∞—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
2. ‚ùå **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—è `complaints` –≤ Patient** - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ, –Ω–æ –µ–≥–æ –Ω–µ—Ç –≤ –ë–î
3. ‚ö†Ô∏è **MedicalRecordType –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π** - –Ω–µ—Ç —Ñ–æ—Ç–æ–º–µ—Ç—Ä–∏–∏, –±–∏–æ–º–µ—Ç—Ä–∏–∏, –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
4. ‚ö†Ô∏è **–ù–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –¥–ª—è –∞–Ω–∞–ª–∏–∑–æ–≤** - –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ JSON, —Å–ª–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
5. ‚ö†Ô∏è **–ù–µ—Ç —Ç–∞–±–ª–∏—Ü –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –∫–∞—Ä—Ç—ã** - –∞–Ω–∞–º–Ω–µ–∑, –¥–∏–∞–≥–Ω–æ–∑—ã, –ø–ª–∞–Ω –ª–µ—á–µ–Ω–∏—è

### –ß—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É:
- ‚úÖ Patient (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å complaints)
- ‚úÖ File (—Å–æ –≤—Å–µ–º–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º–∏ –ø–æ–ª—è–º–∏)
- ‚úÖ ThreeDModel + ModelingSession
- ‚úÖ BiometryModel + BiometrySession
- ‚úÖ MedicalRecord (–Ω—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ç–∏–ø—ã)

### –ß—Ç–æ –ù–ï —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É:
- ‚ùå –ù–µ—Ç —Ç–∞–±–ª–∏—Ü –¥–ª—è —Ñ–æ—Ç–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- ‚ùå –ù–µ—Ç —Ç–∞–±–ª–∏—Ü –¥–ª—è —Ü–µ—Ñ–∞–ª–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- ‚ùå –ù–µ—Ç —Ç–∞–±–ª–∏—Ü –¥–ª—è –ö–¢ –∞–Ω–∞–ª–∏–∑–∞
- ‚ùå –ù–µ—Ç —Ç–∞–±–ª–∏—Ü –¥–ª—è –∞–Ω–∞–º–Ω–µ–∑–∞, –¥–∏–∞–≥–Ω–æ–∑–æ–≤, –ø–ª–∞–Ω–∞ –ª–µ—á–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:
1. üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô**: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
2. üü† **–í–´–°–û–ö–ò–ô**: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ complaints, —Ä–∞—Å—à–∏—Ä–∏—Ç—å MedicalRecordType
3. üü° **–°–†–ï–î–ù–ò–ô**: –°–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–æ–≤
4. üü¢ **–ù–ò–ó–ö–ò–ô**: –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø–æ–ª–Ω–æ–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –∫–∞—Ä—Ç—ã

---

## 7. –ü—Ä–∏–º–µ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

```
patients
‚îú‚îÄ‚îÄ id, full_name, birth_date, gender, contact_info
‚îú‚îÄ‚îÄ complaints, medical_card_number, address, emergency_contact, insurance_info
‚îî‚îÄ‚îÄ created_at, updated_at

users
‚îú‚îÄ‚îÄ id, username, email, hashed_password, is_active
‚îî‚îÄ‚îÄ created_at, updated_at

files
‚îú‚îÄ‚îÄ id, patient_id, name, file_path, file_type
‚îú‚îÄ‚îÄ medical_category, study_date, body_part, image_orientation
‚îú‚îÄ‚îÄ file_size, mime_type, file_hash
‚îî‚îÄ‚îÄ created_at, updated_at, is_active

file_versions
‚îú‚îÄ‚îÄ id, file_id, version_number, file_path
‚îú‚îÄ‚îÄ file_hash, file_size, version_type, version_description
‚îú‚îÄ‚îÄ created_at, created_by
‚îî‚îÄ‚îÄ (—Å–≤—è–∑—å —Å files –∏ users)

medical_records
‚îú‚îÄ‚îÄ id, patient_id, record_type (cephalometry, ct, photometry, biometry, modeling)
‚îú‚îÄ‚îÄ data (JSON), notes
‚îî‚îÄ‚îÄ created_at, updated_at

medical_record_history
‚îú‚îÄ‚îÄ id, medical_record_id, data, notes, updated_by
‚îî‚îÄ‚îÄ created_at

photometry_analyses (–ù–û–í–ê–Ø)
‚îú‚îÄ‚îÄ id, patient_id, analysis_date
‚îú‚îÄ‚îÄ frontal_photo_id, profile_photo_id, profile45_photo_id, intraoral_photo_id
‚îú‚îÄ‚îÄ upper_lip_position, lower_lip_position, chin_position
‚îú‚îÄ‚îÄ measurements (JSON)
‚îî‚îÄ‚îÄ created_at

cephalometry_analyses (–ù–û–í–ê–Ø)
‚îú‚îÄ‚îÄ id, patient_id, analysis_date
‚îú‚îÄ‚îÄ lateral_xray_id, frontal_xray_id
‚îú‚îÄ‚îÄ points (JSON), measurements (JSON), angles (JSON), distances (JSON)
‚îî‚îÄ‚îÄ created_at

ct_analyses (–ù–û–í–ê–Ø)
‚îú‚îÄ‚îÄ id, patient_id, scan_date, archive_id
‚îú‚îÄ‚îÄ tmj_measurements (JSON), tooth_measurements (JSON)
‚îú‚îÄ‚îÄ pen_analysis (JSON), basal_width (JSON), airway_measurements (JSON)
‚îî‚îÄ‚îÄ created_at

three_d_models
‚îú‚îÄ‚îÄ id, patient_id, model_type, model_format, file_path
‚îú‚îÄ‚îÄ original_filename, file_size, scale, position_x, position_y, position_z
‚îú‚îÄ‚îÄ rotation_x, rotation_y, rotation_z
‚îú‚îÄ‚îÄ vertices_count, faces_count, bounding_box (JSON)
‚îî‚îÄ‚îÄ created_at, updated_at, is_active

modeling_sessions
‚îú‚îÄ‚îÄ id, patient_id
‚îú‚îÄ‚îÄ upper_jaw_id, lower_jaw_id, bite1_id, bite2_id, occlusion_pad_id
‚îú‚îÄ‚îÄ cement_gap, insertion_path, border_thickness, smoothing_strength, auto_adaptation
‚îú‚îÄ‚îÄ status, modeling_parameters (JSON)
‚îî‚îÄ‚îÄ created_at, updated_at, is_active

biometry_models
‚îú‚îÄ‚îÄ id, patient_id, model_type, model_format, file_path
‚îú‚îÄ‚îÄ original_filename, file_size, scale, position_x, position_y, position_z
‚îú‚îÄ‚îÄ rotation_x, rotation_y, rotation_z
‚îú‚îÄ‚îÄ vertices_count, faces_count, bounding_box (JSON)
‚îú‚îÄ‚îÄ status (uploaded, analyzed, calibrated, exported)
‚îî‚îÄ‚îÄ created_at, updated_at, is_active

biometry_sessions
‚îú‚îÄ‚îÄ id, patient_id, model_id
‚îú‚îÄ‚îÄ calibration_points (JSON), transformation_matrix (JSON)
‚îú‚îÄ‚îÄ status
‚îî‚îÄ‚îÄ created_at, updated_at, is_active

anamnesis (–ù–û–í–ê–Ø)
‚îú‚îÄ‚îÄ id, patient_id
‚îú‚îÄ‚îÄ chief_complaint, medical_history, family_history
‚îú‚îÄ‚îÄ allergies, medications, surgical_history
‚îî‚îÄ‚îÄ created_at, updated_at

diagnoses (–ù–û–í–ê–Ø)
‚îú‚îÄ‚îÄ id, patient_id, diagnosis_code, diagnosis_text
‚îú‚îÄ‚îÄ diagnosis_type, severity, is_chronic, is_active
‚îú‚îÄ‚îÄ diagnosed_date, resolved_date, notes
‚îî‚îÄ‚îÄ created_at, updated_at

treatment_plans (–ù–û–í–ê–Ø)
‚îú‚îÄ‚îÄ id, patient_id, diagnosis_id, plan_name, description
‚îú‚îÄ‚îÄ start_date, expected_end_date, actual_end_date, status
‚îú‚îÄ‚îÄ phases (JSON), objectives (JSON), appliances (JSON), notes
‚îî‚îÄ‚îÄ created_at, updated_at

documents
‚îú‚îÄ‚îÄ id, patient_id, document_type, file_path, format
‚îú‚îÄ‚îÄ generated_at, metadata_json (JSON)
‚îî‚îÄ‚îÄ (—Å–≤—è–∑—å —Å patients)
```

---

**–ö–æ–Ω–µ—Ü –∞–Ω–∞–ª–∏–∑–∞**
